import{_ as E,d as N,r as _,o as k,m as A,j as o,D as R,h as s,i as m,e as n,c as T,b as B,F as H,k as y,q as O,x as U,G as j,H as F,E as f,I as M}from"./index-dfca81a1.js";const D=N({name:"AddNews"}),I=Object.assign(D,{setup(z){const d=O(),i=U(),p=_(),v={title:[{required:!0,trigger:"blur",validator:(e,t,a)=>{t.length?a():a(new Error("文章类别是必须的"))}}],article:[{required:!0,trigger:"blur",validator:(e,t,a)=>{t.length?a():a(new Error("文章内容是必须的"))}}],type:[{required:!0,validator:(e,t,a)=>{t.length?a():a(new Error("文章标题是必须的"))}}]},l=_({hid:null,title:"",article:"",type:""}),h=[{type:"1",name:"新闻"},{type:"2",name:"体育"},{type:"3",name:"娱乐"},{type:"4",name:"科技"},{type:"5",name:"其他"}],w=async()=>{if(!i.query.hid)return;let e=await R(i.query.hid);l.value.title=e.headline.title,l.value.article=e.headline.article,l.value.type=e.headline.type===1?"新闻":e.headline.type===2?"体育":e.headline.type===3?"娱乐":e.headline.type===4?"科技":"其他"};k(()=>{w()});const g=()=>{d.back()},x=async()=>{var t;await((t=p.value)==null?void 0:t.validate()),await j();const e={...l.value};e.hid=i.query.hid,e.type=="新闻"&&(e.type="1"),e.type=="体育"&&(e.type="2"),e.type=="娱乐"&&(e.type="3"),e.type=="科技"&&(e.type="4"),e.type=="其他"&&(e.type="5"),i.query.hid?(await F(e),f.success("修改成功")):(await M(l.value),f.success("添加成功")),d.push({name:"HeadlineNews"})};return(e,t)=>{const a=s("el-input"),u=s("el-form-item"),b=s("el-option"),V=s("el-select"),q=s("el-form"),c=s("el-button"),C=s("el-card");return m(),A(C,{class:"box-card AddNewsContainer"},{default:o(()=>[n(q,{rules:v,model:l.value,ref_key:"formRef",ref:p,size:"default"},{default:o(()=>[n(u,{label:"文章标题",prop:"title"},{default:o(()=>[n(a,{modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=r=>l.value.title=r),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),n(u,{style:{margin:"50px 0"},label:"文章内容",prop:"article"},{default:o(()=>[n(a,{modelValue:l.value.article,"onUpdate:modelValue":t[1]||(t[1]=r=>l.value.article=r),type:"textarea",rows:"8"},null,8,["modelValue"])]),_:1}),n(u,{label:"文章内容",prop:"type"},{default:o(()=>[n(V,{modelValue:l.value.type,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.type=r),placeholder:"请选择文章类别"},{default:o(()=>[(m(),T(H,null,B(h,r=>n(b,{label:r.name,value:r.type},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),n(u,null,{default:o(()=>[n(c,{onClick:g},{default:o(()=>[y("取消")]),_:1}),n(c,{type:"primary",onClick:x},{default:o(()=>[y("保存")]),_:1})]),_:1})]),_:1})}}}),K=E(I,[["__scopeId","data-v-869a0e74"]]);export{K as default};
