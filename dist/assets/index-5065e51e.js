import{_ as D,d as V,g as P,u as H,p as M,r as i,w as $,o as q,c,a as n,F as E,b as U,e as d,f as j,h as g,i as o,t as r,j as u,k as _,l as k,m as z,n as C,q as F,s as L,E as O}from"./index-dfca81a1.js";const W={class:"container"},R={class:"listItem"},T={class:"text"},A={class:"detail"},G={style:{"margin-top":"20px"}},J=V({name:"HeadlineNews"}),K=Object.assign(J,{setup(Q){const{Bus:f}=P().appContext.config.globalProperties,x=H(M),v=F(),y=x.uid,t=i({keyWords:"",type:0,pageNum:1,pageSize:5}),b=i(0),m=i([{hid:null,pageViews:null,pastHours:null,publisher:null,title:"",type:null}]);f.on("keyword",a=>{t.value.keyWords=a}),f.on("tid",a=>{t.value.type=a}),$(()=>t.value,()=>{s()},{deep:!0});const s=async()=>{let a=await j(t.value);m.value=a.pageInfo.pageData,t.value.pageNum=a.pageInfo.pageNum,t.value.pageSize=a.pageInfo.pageSize,b.value=+a.pageInfo.totalSize};q(()=>{s()});const N=a=>{v.push({name:"Detail",query:{hid:a}})},w=async a=>{await L(a),O.success("删除成功!"),s()},I=a=>{v.push({name:"addOrModifyNews",query:{hid:a}})};return(a,l)=>{const p=g("el-button"),S=g("el-popconfirm"),B=g("el-pagination");return o(),c("div",W,[n("div",R,[(o(!0),c(E,null,U(m.value,e=>(o(),c("div",{class:"containerItem",key:e.hid},[n("div",null,[n("span",T,r(e.title),1)]),n("div",A,[n("span",null,r(e.type==1?"新闻":e.type==2?"体育":e.type==3?"娱乐":e.type==4?"科技":"其他"),1),n("span",null,r(e.pageViews)+"浏览",1),n("span",null,r(e.pastHours)+"小时前",1)]),n("div",null,[d(p,{onClick:h=>N(e.hid),size:"small",style:{background:"#198754","margin-left":"15px",color:"#bbd3dc"}},{default:u(()=>[_("查看全文")]),_:2},1032,["onClick"]),e.publisher==k(y)?(o(),z(S,{key:0,onConfirm:h=>w(e.hid),title:`您确定要删除${e.title}吗?`},{reference:u(()=>[d(p,{size:"small",style:{background:"#dc3545",color:"#bbd3dc"}},{default:u(()=>[_("删除")]),_:1})]),_:2},1032,["onConfirm","title"])):C("",!0),e.publisher==k(y)?(o(),z(p,{key:1,onClick:h=>I(e.hid),size:"small",style:{background:"#212529",color:"#bbd3dc"}},{default:u(()=>[_("修改")]),_:2},1032,["onClick"])):C("",!0)])]))),128)),n("div",G,[d(B,{"current-page":t.value.pageNum,"onUpdate:currentPage":l[0]||(l[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>t.value.pageSize=e),onSizeChange:s,onCurrentChange:s,"page-sizes":[5,7,10],background:"",layout:"prev, pager, next , ->, sizes, total",total:b.value},null,8,["current-page","page-size","total"])])])])}}}),Y=D(K,[["__scopeId","data-v-64c5e8b2"]]);export{Y as default};
